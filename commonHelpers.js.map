{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst apiKey = '42006022-41a20d969efbb704c546dcbcd';\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loadingIndicator = document.getElementById('loading-indicator');\nconst galleryContainer = document.getElementById('gallery-container');\nconst loadMoreBtn = document.getElementById('load-more');\nlet searchTerm = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', handleSearch);\n\nloadMoreBtn.innerText = 'Load more';\nloadMoreBtn.classList.add('hidden');\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  page = 1; // Reset page number on new search\n  showLoadingIndicator();\n  clearGallery();\n\n  try {\n    const responseData = await fetchImages();\n    if (responseData.hits.length === 0) {\n      // Handle case when there are no results\n      handleNoResults();\n    } else {\n      updateGallery(responseData.hits);\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data. Please try again.',\n    });\n  } finally {\n    hideLoadingIndicator();\n  }\n}\n\nasync function fetchImages() {\n  const perPage = 40;\n  const response = await axios.get(\n    `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n      searchTerm\n    )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n  );\n  return response.data;\n}\n\nfunction showLoadingIndicator() {\n  loadingIndicator.classList.remove('hidden');\n}\n\nfunction hideLoadingIndicator() {\n  loadingIndicator.classList.add('hidden');\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction handleNoResults() {\n  iziToast.info({\n    message: 'Sorry, there are no images matching your search query. Please try again.',\n    position: 'topRight',\n    color: '#EF4040',\n    progressBarColor: '#B51B1B',\n    messageColor: '#FAFAFB',\n    icon: './img/bi_x-octagon.svg',\n  });\n}\n\nfunction handleLoadMore() {\n  page += 1;\n  showLoadingIndicator();\n\n  fetchImages()\n    .then((responseData) => {\n      if (responseData.hits.length === 0) {\n        handleNoResults();\n      } else {\n        updateGallery(responseData.hits);\n        smoothScrollToGallery();\n      }\n    })\n    .catch((error) => {\n      console.error('Error fetching data:', error);\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching data. Please try again.',\n      });\n    })\n    .finally(() => {\n      hideLoadingIndicator();\n    });\n}\n\nfunction smoothScrollToGallery() {\n  const galleryHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryHeight * 2, // Scroll by two heights of a gallery item\n    behavior: 'smooth',\n  });\n}\n\nfunction clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nfunction updateGallery(images) {\n  const lightbox = new SimpleLightbox('.gallery-item a');\n\n  images.forEach((image) => {\n    const galleryItem = document.createElement('div');\n    galleryItem.classList.add('gallery-item');\n\n    const imageLink = document.createElement('a');\n    imageLink.href = image.largeImageURL;\n\n    const imageElement = document.createElement('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageElement.title = image.tags;\n\n    imageLink.appendChild(imageElement);\n    galleryItem.appendChild(imageLink);\n\n    galleryContainer.appendChild(galleryItem);\n  });\n\n  lightbox.refresh();\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n"],"names":["apiKey","searchForm","searchInput","loadingIndicator","galleryContainer","loadMoreBtn","searchTerm","page","handleSearch","handleLoadMore","event","iziToast","showLoadingIndicator","clearGallery","responseData","fetchImages","handleNoResults","updateGallery","showLoadMoreButton","error","hideLoadingIndicator","axios","smoothScrollToGallery","galleryHeight","images","lightbox","SimpleLightbox","image","galleryItem","imageLink","imageElement"],"mappings":"+vBAMA,MAAMA,EAAS,qCACTC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAc,SAAS,eAAe,WAAW,EACvD,IAAIC,EAAa,GACbC,EAAO,EAEXN,EAAW,iBAAiB,SAAUO,CAAY,EAElDH,EAAY,UAAY,YACxBA,EAAY,UAAU,IAAI,QAAQ,EAClCA,EAAY,iBAAiB,QAASI,CAAc,EAEpD,eAAeD,EAAaE,EAAO,CAIjC,GAHAA,EAAM,eAAc,EACpBJ,EAAaJ,EAAY,MAAM,OAE3BI,IAAe,GAAI,CACrBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDJ,EAAO,EACPK,IACAC,IAEA,GAAI,CACF,MAAMC,EAAe,MAAMC,IACvBD,EAAa,KAAK,SAAW,EAE/BE,KAEAC,EAAcH,EAAa,IAAI,EAC/BI,IAEH,OAAQC,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CR,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0DACf,CAAK,CACL,QAAY,CACRS,GACD,CACH,CAEA,eAAeL,GAAc,CAO3B,OALiB,MAAMM,EAAM,IAC3B,gCAAgCrB,CAAM,MAAM,mBAC1CM,CACD,CAAA,iEAAiEC,CAAI,cAC1E,GACkB,IAClB,CAEA,SAASK,GAAuB,CAC9BT,EAAiB,UAAU,OAAO,QAAQ,CAC5C,CAEA,SAASiB,GAAuB,CAC9BjB,EAAiB,UAAU,IAAI,QAAQ,CACzC,CAEA,SAASe,GAAqB,CAC5Bb,EAAY,MAAM,QAAU,OAC9B,CAEA,SAASW,GAAkB,CACzBL,EAAS,KAAK,CACZ,QAAS,2EACT,SAAU,WACV,MAAO,UACP,iBAAkB,UAClB,aAAc,UACd,KAAM,wBACV,CAAG,CACH,CAEA,SAASF,GAAiB,CACxBF,GAAQ,EACRK,IAEAG,EAAa,EACV,KAAMD,GAAiB,CAClBA,EAAa,KAAK,SAAW,EAC/BE,KAEAC,EAAcH,EAAa,IAAI,EAC/BQ,IAER,CAAK,EACA,MAAOH,GAAU,CAChB,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CR,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0DACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbS,GACN,CAAK,CACL,CAEA,SAASE,GAAwB,CAC/B,MAAMC,EAAgB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OACtF,OAAO,SAAS,CACd,IAAKA,EAAgB,EACrB,SAAU,QACd,CAAG,CACH,CAEA,SAASV,GAAe,CACtBT,EAAiB,UAAY,EAC/B,CAEA,SAASa,EAAcO,EAAQ,CAC7B,MAAMC,EAAW,IAAIC,EAAe,iBAAiB,EAErDF,EAAO,QAASG,GAAU,CACxB,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAU,IAAI,cAAc,EAExC,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAOF,EAAM,cAEvB,MAAMG,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,IAAMH,EAAM,aACzBG,EAAa,IAAMH,EAAM,KACzBG,EAAa,MAAQH,EAAM,KAE3BE,EAAU,YAAYC,CAAY,EAClCF,EAAY,YAAYC,CAAS,EAEjCzB,EAAiB,YAAYwB,CAAW,CAC5C,CAAG,EAEDH,EAAS,QAAO,CAClB"}